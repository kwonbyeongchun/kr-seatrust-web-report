# SeaTrust Software Hub 프로젝트 프레젠테이션 목차

---

## 1. 프로젝트 개요 (5분)

### 1.1 프로젝트 소개
- **프로젝트명**: SeaTrust Software Hub
- **목적**: KR 소프트웨어 포트폴리오 통합 관리 플랫폼
- **개발 기간**: 2025년 1월
- **버전**: 1.0.0

### 1.2 프로젝트 목표
- Office 365 기반 통합 인증 시스템
- 소프트웨어 배포 및 다운로드 관리
- AI 기반 지식베이스 구축
- 다국어 지원 (EN/KO/ZH)

---

## 2. 시스템 아키텍처 (10분)

### 2.1 기술 스택
**프론트엔드**
- React 19 + TypeScript
- Vite 빌드 시스템
- React Router 7 (HashRouter)
- Tailwind CSS

**백엔드**
- Express 5 + TypeScript
- MSSQL 데이터베이스
- MinIO (S3 호환 스토리지)

**AI/ML**
- OpenAI GPT-4o-mini
- Qdrant Vector DB
- Text-embedding-3-small

### 2.2 시스템 구성도
```
Frontend (React) ←→ Backend (Express) ←→ MSSQL
                          ↓
                    MinIO (파일 스토리지)
                          ↓
              MS Graph API (Office 365)
                          ↓
         Qdrant + OpenAI (RAG 시스템)
```

### 2.3 인프라 구조
- Docker Compose 기반 컨테이너 배포
- Nginx 리버스 프록시
- GHCR (GitHub Container Registry)
- 스테이징 서버: 115.68.232.61

---

## 3. 주요 기능 구현 (30분)

### 3.1 프론트엔드 기능

#### 3.1.1 사용자 기능
- **홈페이지**: 소프트웨어 카드 그리드, Hero 슬라이드
- **소프트웨어 상세**:
  - 다국어 설명, FAQ, 릴리즈 노트
  - 하드웨어 요구사항 카드
  - 다운로드 승인 검증
- **견적/문의**: 폼 검증 및 이메일 발송
- **내 피드백**: 스레드 관리, 필터링, 검색

#### 3.1.2 관리자 기능
- **사용자 관리**: 검색, 정렬, 페이지네이션, 역할 관리
- **다운로드 승인**: 사용자별 소프트웨어 접근 권한 관리
- **지식베이스 관리**:
  - S3 문서 업로드
  - RAG AI 답변 테스트
  - 피드백 모니터링

#### 3.1.3 UI/UX
- Atomic Design 패턴 (atoms/molecules/organisms)
- Markdown 에디터/프리뷰
- Toast 알림 시스템
- 반응형 디자인

### 3.2 백엔드 API

#### 3.2.1 인증 API
- `/api/auth/login|logout`: 세션 관리
- `/api/auth/graph/*`: MS Graph Device Flow 인증

#### 3.2.2 콘텐츠 API
- `/api/software`: 다국어 제품 정보, FAQ, 릴리즈 노트
- `/api/upload`: MinIO 파일 업로드 (아이콘, 패키지, 비디오)
- `/api/users`: 사용자 CRUD
- `/api/approvals`: 다운로드 승인 관리

#### 3.2.3 고객 소통 API
- `/api/contact`: 문의 폼 처리 및 이메일 발송
- `/api/quote`: 견적 요청 처리

#### 3.2.4 RAG API
- `/api/manuals`: 지식 문서 CRUD
- PDF/DOC/DOCX 파싱 → 텍스트 청킹 → 임베딩 생성 → Qdrant 저장

### 3.3 MSAL 인증 시스템 (핵심)

#### 3.3.1 구현 기능
- **Device Code Flow 인증 UI**
  - `/msal-auth` 관리자 전용 페이지
  - 실시간 토큰 상태 확인
  - 클립보드 복사 기능 (HTTP/HTTPS 환경 지원)

#### 3.3.2 토큰 영구 저장
- **MSAL 캐시 플러그인**
  - `.token-cache.json`: Access Token (1시간)
  - `.msal-cache.json`: Refresh Token (90일)
- **서버 재시작 시 자동 복구**

#### 3.3.3 자동 토큰 갱신 (4단계)
1. 서버 시작 시 검증 및 갱신
2. API 호출 시 실시간 갱신 (만료 5분 전)
3. 스케줄러 기반 갱신 (매일 00:00 KST)
4. 수동 갱신 API 제공

#### 3.3.4 인증 흐름
```
User (Browser) → Frontend → Vite Proxy → Backend
    → Graph Service (MSAL) → MS Device Login
    → Graph API → Tokens → File Cache
```

### 3.4 RAG 지식베이스 시스템

#### 3.4.1 RAG 파이프라인
- **임베딩**: text-embedding-3-small
- **청킹**: 2,000자 / 오버랩 200자
- **검색**: Qdrant 벡터 유사도 상위 5개
- **생성**: GPT-4o-mini

#### 3.4.2 기능
- 문서 업로드 및 자동 인덱싱
- AI 기반 답변 생성
- 관련 피드백 연계
- 소프트웨어별 지식 분리

---

## 4. 데이터베이스 설계 (10분)

### 4.1 주요 테이블
- **users**: 사용자 정보, 역할, work area
- **software**: 소프트웨어 메타데이터
- **descriptions**: 다국어 설명 (EN/KO/ZH)
- **hardware_requirements**: 하드웨어 요구사항
- **FAQs**: 다국어 FAQ
- **release_notes**: JSON 형식 릴리즈 히스토리
- **feedback**: 사용자 피드백 스레드
- **software_approvals**: 다운로드 승인 관리
- **knowledge_documents**: RAG 문서 메타데이터

### 4.2 설계 원칙
- 다국어 컬럼 조합 UNIQUE
- CASCADE 정책으로 데이터 무결성
- JSON 타입 활용 (릴리즈 노트)
- 정규화 완료

---

## 5. 배포 및 운영 (10분)

### 5.1 Docker 배포
- **컨테이너 구성**:
  - Frontend: Node 20-slim → Nginx
  - Backend: Node 20-alpine
  - MinIO: 포트 9000/9001
  - Qdrant: 포트 6333/6334

### 5.2 CI/CD
- GitHub Container Registry (GHCR)
- 태그 전략: main-커밋, v*
- 무중단 업데이트: `docker-compose pull && up -d`

### 5.3 환경 변수 관리
```
MSSQL, JWT_SECRET, S3, MS Graph,
OpenAI API Key, Qdrant URL/API Key
```

### 5.4 배포 체크리스트
1. 환경 변수 설정
2. 포트 충돌 확인
3. MS Graph 초기 인증
4. RAG 인덱스 초기화
5. 헬스체크 및 로그 확인

---

## 6. 문제 해결 및 테스트 (10분)

### 6.1 해결한 주요 문제 (7개)

#### 6.1.1 TypeScript 컴파일 에러
- **문제**: `TS6133: 'reject' is declared but never read`
- **해결**: Promise constructor에서 미사용 파라미터 제거

#### 6.1.2 프로덕션 CORS 에러
- **문제**: 하드코딩된 localhost URL
- **해결**: 상대 경로 `/api/...` 사용

#### 6.1.3 클립보드 복사 실패 (HTTP)
- **문제**: `navigator.clipboard` HTTP 미지원
- **해결**: Modern API + Fallback `execCommand` 구현

#### 6.1.4 토큰 영속성 문제
- **문제**: 서버 재시작 시 Refresh Token 소실
- **해결**: MSAL 파일 캐시 플러그인 구현

#### 6.1.5 Contact Form DB 에러
- **문제**: `Cannot insert NULL into 'id'`
- **해결**: IDENTITY 설정 SQL 스크립트

#### 6.1.6 JSON 파싱 에러
- **문제**: Graph auth routes 미등록
- **해결**: `app.ts`에 routes 마운트

#### 6.1.7 Vite 프록시 미설정
- **문제**: `/api/*` 요청 실패
- **해결**: `vite.config.ts` 프록시 추가

### 6.2 테스트 현황

#### 6.2.1 자동화 테스트
- **Playwright E2E**:
  - `tests/e2e/my-feedback-history.spec.ts`
  - 로그인, 필터링, 검색, empty state 검증
- **부족한 영역**:
  - 다운로드 승인 플로우
  - 관리자 승인
  - 지식베이스 업로드
  - RAG 응답

#### 6.2.2 수동 테스트
- ✅ 관리자 메뉴 MSAL 인증 표시
- ✅ 토큰 자동 확인 및 갱신
- ✅ Device Flow 인증 프로세스
- ✅ 다국어 전환
- ✅ 클립보드 복사 (HTTP/HTTPS)

---

## 7. 프로젝트 성과 (5분)

### 7.1 정량적 성과
- **구현 기능**: 4개 주요 모듈 (인증, 소프트웨어 관리, RAG, 관리자)
- **API 엔드포인트**: 30+ 개
- **변경 파일**: 50+ 개
- **해결한 버그**: 7개
- **다국어 지원**: 3개 언어
- **코드 라인 수**: 약 5,000+ 줄

### 7.2 정성적 성과
- **사용자 경험**: 브라우저 기반 인증, 직관적 UI
- **시스템 안정성**: 토큰 영속성, 자동 갱신
- **보안**: Delegated 권한, Admin 전용 기능
- **확장성**: 모듈화된 구조, Docker 컨테이너화
- **AI 통합**: RAG 기반 지능형 고객 지원

### 7.3 기술적 성과
- **성능 개선**:
  - 서버 재시작 시간 30초 절약
  - 토큰 검증 < 10ms (캐시 히트)
- **자동화**:
  - 90일 동안 무인 운영 가능
  - 이메일 스케줄러 자동 처리

---

## 8. 미해결 항목 및 리스크 (5분)

### 8.1 미해결 항목
1. **문서 불일치**: `todo-list.md` 미업데이트
2. **계정 복구**: 비밀번호 찾기/2FA 미구현
3. **테스트 커버리지**: 주요 플로우 미커버
4. **보안**: 시크릿 매니지먼트 부재
5. **모니터링**: 애플리케이션 레벨 로깅/알림 없음

### 8.2 리스크 평가
- **높음**: 테스트 부족으로 인한 회귀 리스크
- **중간**: 보안 키 노출 위험
- **낮음**: 문서 불일치

---

## 9. 향후 계획 (10분)

### 9.1 단기 개선 (1개월)
1. **모니터링 대시보드**:
   - 토큰 만료 시간 실시간 표시
   - 자동 갱신 히스토리 로깅

2. **에러 알림 시스템**:
   - 토큰 갱신 실패 이메일 알림
   - 슬랙 웹훅 연동

3. **인증 히스토리**:
   - 인증 시도 audit log
   - 데이터베이스 저장

### 9.2 중기 개선 (3개월)
1. **다중 계정 지원**:
   - 여러 Office 365 계정 관리
   - 계정별 토큰 캐시 분리

2. **권한 세분화**:
   - 메일 읽기/발송 전용 계정
   - RBAC 구현

3. **토큰 암호화**:
   - AES-256 캐시 파일 암호화
   - 환경 변수 기반 키 관리

### 9.3 장기 개선 (6개월)
1. **테스트 자동화**:
   - E2E 테스트 확대
   - 백엔드 유닛 테스트 (Jest/Vitest)
   - CI/CD 파이프라인 통합

2. **고급 RAG 기능**:
   - 멀티모달 검색 (이미지, 다이어그램)
   - 대화형 AI 어시스턴트
   - 자동 문서 업데이트

3. **운영 자동화**:
   - 자동 백업/복원
   - 성능 모니터링
   - 장애 알림

---

## 10. 결론 및 Q&A (5분)

### 10.1 프로젝트 요약
- ✅ Office 365 통합 인증 시스템 구축
- ✅ 소프트웨어 배포 플랫폼 완성
- ✅ AI 기반 지식베이스 구현
- ✅ 다국어 지원 및 Docker 배포

### 10.2 핵심 성과
- **안정성**: 90일 자동 운영
- **확장성**: 모듈화된 아키텍처
- **사용성**: 직관적 UI/UX
- **지능화**: RAG AI 통합

### 10.3 감사의 말
- Microsoft (Azure AD, Graph API, MSAL)
- React, Express, TypeScript
- OpenAI, Qdrant
- 오픈소스 커뮤니티

### 10.4 Q&A

---

**발표 시간**: 약 90분
**작성일**: 2025-11-15
**버전**: 1.0.0
